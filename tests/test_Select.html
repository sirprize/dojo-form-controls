<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>dijitive/Select</title>
        <link rel="stylesheet" href="styles.css">
    </head>

    <body>
        <div class="container">
            <a href="index.html">Back to overview</a>
            
            <h1>dijitive/Select</h1>
            
            <h3>Programmatic</h3>
            <p>Single</p>
            <select id="pro1"></select>
            <p>Multiple</p>
            <select id="pro2"></select>
            <p>Backed by synchronous store</p>
            <select id="pro3"></select>
            <p>Backed by asynchronous store</p>
            <select id="pro4"></select>
            <p>Disabled</p>
            <select id="pro5"></select>
            
            <h3>Declarative</h3>
            <p>Single</p>
            <select id="dec1" name="dec1" data-dojo-type="dijitive/Select" required="true">
                <option value="">Please select</option>
                <option value="a">A</option>
                <option value="b" selected="selected">B</option>
                <option value="c" disabled="true">C</option>
                <option value="d">D</option>
            </select>
            
            <p>Multiple</p>
            <select id="dec2" name="dec2" data-dojo-type="dijitive/Select" multiple="true" required="true">
                <option value="">Please select</option>
                <option value="a" selected="selected">A</option>
                <option value="b" selected="selected">B</option>
                <option value="c" disabled="true">C</option>
                <option value="d">D</option>
            </select>
        </div>
        
        <script type="text/javascript" src="config.js"></script>
        <script type="text/javascript" src="../vendor/dojo/dojo/dojo.js"></script>
        <script>
            require([
                "dijitive/Select",
                "dojo/store/Memory",
                "dojo/store/JsonRest",
                "dojo/data/ObjectStore",
                "dijit/registry",
                "dojo/parser",
                "dojo/query",
                "dojo/on",
                "dojo/domReady!"
            ], function (
                Select,
                Memory,
                JsonRest,
                ObjectStore,
                registry,
                parser,
                query,
                on
            ) {
                "use strict";

                parser.parse();

                var options = [
                    { value: '', label: 'Please select' },
                    { value: "a", label: "A" },
                    { value: "b", label: "B" },
                    { value: "c", label: "C", disabled: true },
                    { value: "d", label: "D" }
                ];
                
                var sStore = new ObjectStore(new Memory({
                    data: [
                        { id: '', label: 'Please select' },
                        { id: "a", label: "A" },
                        { id: "b", label: "B" },
                        { id: "c", label: "C" },
                        { id: "d", label: "D" }
                    ]
                }));

                var aStore = new ObjectStore(new JsonRest({
                    target: 'test_Select.json'
                }));
                
                // simple
                var pro1 = new Select({
                    baseClass: 'a-simple-select',
                    name: 'pro1',
                    value: 'b',
                    options: options,
                    required: true,
                    onChange: function (value) {
                        console.log('onChange(): ' + value)
                    }
                }, 'pro1');

                pro1.watch('value', function (prop, oldVal, val) {
                    console.log('watch("value")', prop, oldVal, val);
                });

                pro1.watch('message', function (prop, oldVal, val) {
                    console.log('watch("message"):', val);
                });

                pro1.startup();

                // multiple
                var pro2 = new Select({
                    multiple: true,
                    name: 'pro2',
                    value: ['a', 'd'],
                    options: options,
                    required: true,
                    onChange: function (value) {
                        console.log('onChange(): ' + value)
                    }
                }, 'pro2');

                pro2.watch('value', function (prop, oldVal, val) {
                    console.log('watch("value"):', val);
                });

                pro2.watch('message', function (prop, oldVal, val) {
                    console.log('watch("message"):', val);
                });

                pro2.startup();

                // multiple backed by synchronous store
                var pro3 = new Select({
                    multiple: true,
                    name: 'pro3',
                    value: 'a',
                    store: sStore,
                    required: true,
                    onChange: function (value) {
                        console.log('onChange(): ' + value)
                    }
                }, 'pro3');

                pro3.watch('value', function (prop, oldVal, val) {
                    console.log('watch("value"):', val);
                });

                pro3.watch('message', function (prop, oldVal, val) {
                    console.log('watch("message"):', val);
                });

                pro3.startup();

                setTimeout(function () {
                    //pro3.set('value', ['b','d']);
                }, 1000)

                // simple backed by asynchronous store
                var pro4 = new Select({
                    name: 'pro4',
                    value: 'd',
                    store: aStore,
                    required: true,
                    onChange: function (value) {
                        console.log('onChange(): ' + value)
                    }
                }, 'pro4');

                pro4.watch('value', function (prop, oldVal, val) {
                    console.log('watch("value"):', val);
                });

                pro4.watch('message', function (prop, oldVal, val) {
                    console.log('watch("message"):', val);
                });

                pro4.startup();

                // disabled
                var pro5 = new Select({
                    name: 'pro5',
                    value: 'a',
                    options: options,
                    disabled: true,
                    onChange: function (value) {
                        console.log('onChange(): ' + value)
                    }
                }, 'pro5');

                pro5.watch('value', function (prop, oldVal, val) {
                    console.log('watch("value"):', val);
                });

                pro5.watch('message', function (prop, oldVal, val) {
                    console.log('watch("message"):', val);
                });

                pro5.startup();

                // declarative single
                registry.byId('dec1').onChange = function (value) {
                    console.log('onChange(): ' + value)
                };

                registry.byId('dec1').watch('value', function (prop, oldVal, val) {
                    console.log('watch("value"):', val);
                });

                registry.byId('dec1').watch('message', function (prop, oldVal, val) {
                    console.log('watch("message"):', val);
                });

                // declarative multiple
                registry.byId('dec2').onChange = function (value) {
                    console.log('onChange(): ' + value)
                };

                registry.byId('dec2').watch('value', function (prop, oldVal, val) {
                    console.log('watch("value"):', val);
                });

                registry.byId('dec2').watch('message', function (prop, oldVal, val) {
                    console.log('watch("message"):', val);
                });
            });
        </script>
    </body>
</html>
