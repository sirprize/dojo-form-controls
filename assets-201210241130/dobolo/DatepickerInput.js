//>>built
define("dobolo/DatepickerInput","dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/_base/window,dojo/_base/lang,dojo/date/locale,dojo/on,dojo/dom-geometry,./Calendar".split(","),function(e,f,g,h,b,d,c,i,j){return e([f,g],{templateString:'<input type="text" data-dojo-attach-point="containerNode"/>',format:"full",date:null,weekStart:0,_setFormatAttr:function(a){this._set("format","long"===a||"short"===a||"medium"===a||"full"===a?a:"long")},_setWeekStartAttr:function(a){this._set("weekStart",
a)},_setDateAttr:function(a){this._set("date",a instanceof Date?a:new Date);this.domNode.value=d.format(this.get("date"),{selector:"date",formatLength:this.get("format")})},positionCalendar:function(a){var b=i.position(a,!0);this.calendar.set("posTop",b.y+a.offsetHeight+"px");this.calendar.set("posLeft",b.x+"px");this.calendar.position()},showCalendar:function(){this.calendar.placeAt(document.body,"last");this.calendar.show()},updateCalendar:function(){this.calendar.update()},hideCalendar:function(){this.calendar.hide()},
postCreate:function(){this.inherited(arguments);if(this.get("date")instanceof Date)this.domNode.value=d.format(this.get("date"),{selector:"date",formatLength:this.get("format")});this.own(this.calendar=new j({weekStart:this.weekStart,date:this.date}));this.calendar.watch("date",b.hitch(this,function(a,b,c){this.domNode.value=d.format(c,{selector:"date",formatLength:this.get("format")});this.set("date",c)}));this.calendar.on("show",b.hitch(this,function(){this.emit("show-calendar",{bubbles:!0,cancelable:!0})}));
this.calendar.on("hide",b.hitch(this,function(){this.emit("hide-calendar",{bubbles:!0,cancelable:!0})}));this.calendar.startup();b.hitch(this,"positionCalendar",this.domNode)();this.own(c(h.global,"resize",b.hitch(this,"positionCalendar",this.domNode)));this.own(c(this.domNode,"focus",b.hitch(this,"showCalendar")));this.own(c(this.domNode,"click",b.hitch(this,"showCalendar")));this.own(c(this.domNode,"blur",b.hitch(this,"hideCalendar")));this.own(c(this.domNode,"keyup",b.hitch(this,"updateCalendar")));
this.own(c(this.domNode,"keydown",b.hitch(this,function(a){(9===a.keyCode||13===a.keyCode)&&this.calendar.hide()})))}})});